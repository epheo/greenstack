---

- name: Install System packages
  become: yes
  pacman:
    state: latest
    name:
      - linux
      - lsof
      - gdisk
      - openbsd-netcat
      - openresolv
      - openssl
      - openssh
      - cronie

- name: Install Userland packages
  become: yes
  package:
    state: latest
    name:
      - vim
      - sudo
      - git
      - curl
      - rsync
      - tmux
      - htop

- copy:
    src: ../files/vimrc
    dest: ~/.vimrc

- name: Install Vundle
  shell: |
    if [ ! -d "/home/$USER/.vim/bundle/vundle" ]; then
      git clone https://github.com/VundleVim/Vundle.vim.git \
                ~/.vim/bundle/vundle
    fi
  register: vimplugin_result
  changed_when: "vimplugin_result.stdout != ''"
  
- name: Install Plugins
  shell: "vim +PluginInstall +qall"
  when: "vimplugin_result.stdout != ''"



# zsh
# 
# - name: Install needed packages
#   become: yes
#   package:
#     state: latest
#     name: zsh
# 
# - template:
#     src: zshrc
#     dest: ~/.zshrc
# 
# - template:
#     src: zsh_alias
#     dest: ~/.zsh_alias
# 
# - name: Change default Shell
#   become: yes 
#   user:
#     name: "{{ ansible_user }}"
#     shell: /bin/zsh
# 
